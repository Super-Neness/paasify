
config:
  vars:
    var_base1: global_value
    var_base2: global_value
    var_base3: global_value

    var_null1: null

  secret_policy:
    default:
      count: 12
      charset: 123456789!@$%^&*()_+abcdefghijklmnopqrstuvwxyz
    simple:
      count: 8
      charset: 123456789!@%&-_+abcdefghijklmnopqrstuvwxyz

sources:
  default:
    #url: git@git.jeznet.org:mrjk-foss/docker-compose.git
    #  #url: https://git.jeznet.org/mrjk-foss/docker-compose.git

secrets:
  admin_password:
    policy: default


stacks:

  # Test docker-compose file resolution from app or local stack
  - app: app1
    vars:
      var_base2: local_value
      var_null2: null

  - app: app2
    vars:
      var_base2: local_value
      var_null2: null

  - app: app3
    vars:
      var_base2: local_value
      var_null2: null

  # Test if app milti instances works
  # RUN: paasify2 build app2_copy1
  - app: app2
    name: app2_copy1

  # Test if app milti instances works
  # RUN: paasify2 build app2_copy2
  - app: app2
    path: app2_copy2


  # This is expected to fail as there is no docker-compose
  #- app: app3
  #  name: app3_copy


  # Test core tags
  - app: app2
    path: test_devel
    vars:
      var_base2: local_value
      var_null2: null
      app_dir_db_data: my_value
    tags:
      - docker-net-attach:
          #app_network: tata
          db_pass: ${_secret_admin_password}
          db_user: ${_env_USER}
          app_name: "${var_base2}"
          app_namespace: otherns

          #docker_net_ident: tutu
          #var_base3: tag_value
          #var_null3: null


